<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/homePage/homePage_layout}">

<th:block layout:fragment="content_css">
    <!-- html ÌååÏùºÏù¥ Ïó¥Î¶¥Îïå Í∞ôÏù¥ Ïã§ÌñâÎêòÎäî css -->
    <!-- <link rel="stylesheet" href="/"> -->
</th:block>

<th:block layout:fragment="contentFragment">
    <style>

    </style>
    <!-- html ÏΩîÎìú ÏûëÏÑ± -->
    <div class="row">
        <div class="col">

            <div class="row">
                <div class="col" style="background-color: cadetblue;">
                    <!-- Ï±ÖÍ≤ÄÏÉâÍ∏∞Îä• -->
                    <div class="row mt-5 mb-5">
                        <div class="col">
                            <div class="row">
                                <div class="col-2">
                                    <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ -->
                                    <select class="form-select" aria-label="Default select example" name="searchType"
                                        id="search-type">
                                        <option value="BOOK_TITLE"
                                            th:selected="${bookSearchVO.searchType == 'BOOK_TITLE' }">Ï±ÖÏù¥Î¶Ñ</option>
                                        <option value="BOOK_WRITER"
                                            th:selected="${bookSearchVO.searchType == 'BOOK_WRITER'}">Ï†ÄÏûê</option>
                                        <option value="BOOK_PUB" th:selected="${bookSearchVO.searchType == 'BOOK_PUB'}">
                                            Ï∂úÌåêÏÇ¨
                                        </option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <!-- Í≤ÄÏÉâ -->
                                    <input type="text" class="form-control" name="searchValue" id="search-value"
                                        th:value="${bookSearchVO.searchValue}">
                                </div>
                                <div class="col-1">
                                    <!-- Í≤ÄÏÉâ Î≤ÑÌäº -->
                                    <input type="submit" class="btn btn-primary" value="Í≤ÄÏÉâ">
                                </div>

                                <div class="col-4"> 
                                    <h4>Ï±Ö ÏùΩÎäî ÎãπÏã†ÏùÑ ÏúÑÌïú Í∑∏Î¶∞ ÎèÑÏÑúÍ¥Äüìñ</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row mt-5">
                <div class="col-6">
                    <!-- Í≥µÏßÄÏÇ¨Ìï≠ -->
                    <div class="row">
                        <div class="col">
                            <h3>Í≥µÏßÄÏÇ¨Ìï≠</h3>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <table class="table">
                                <colgroup>
                                    <col width="30%">
                                    <col width="*">
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <td>2024-03-08</td>
                                        <td>Í∑∏Î¶∞ ÎèÑÏÑúÍ¥Ä Í≥µÏßÄÏÇ¨Ìï≠123</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-08</td>
                                        <td>Í∑∏Î¶∞ ÎèÑÏÑúÍ¥Ä Í≥µÏßÄÏÇ¨Ìï≠345</td>
                                    </tr>
                                    <tr>
                                        <td>2024-03-08</td>
                                        <td>Í∑∏Î¶∞ ÎèÑÏÑúÍ¥Ä Í≥µÏßÄÏÇ¨Ìï≠789</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ÌñâÏÇ¨Ï†ïÎ≥¥ -->
                    <div class="row mt-1">
                        <div class="col">
                            <div class="row">
                                <div class="col">
                                    <h3>ÌñâÏÇ¨ Ï†ïÎ≥¥</h3>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col">
                                    <table class="table">
                                        <colgroup>
                                            <col width="30%">
                                            <col width="*">
                                        </colgroup>
                                        <tbody>
                                            <tr>
                                                <td>2024-03-08</td>
                                                <td>Í∑∏Î¶∞ ÎèÑÏÑúÍ¥Ä ÌñâÏÇ¨123</td>
                                            </tr>
                                            <tr>
                                                <td>2024-03-08</td>
                                                <td>Í∑∏Î¶∞ ÎèÑÏÑúÍ¥Ä ÌñâÏÇ¨345</td>
                                            </tr>
                                            <tr>
                                                <td>2024-03-08</td>
                                                <td>Í∑∏Î¶∞ ÎèÑÏÑúÍ¥Ä ÌñâÏÇ¨789</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-6">
                    <!-- Îã¨Î†• -->
                    <div class="row">
                        <div class="col-2"></div>
                        <div class="col ">
                            <div id='calendar' style="width: 350px; height: 300px; font-size: 10px;"></div>
                        </div>
                    </div>
                </div>



            </div>

            <div class="row">
                <div class="col-6">
                    <!-- Ï±Ö Ï∂îÏ≤ú, ÏÉàÎ°ú Îì§Ïñ¥Ïò® Ï±Ö,  -->
                    <div class="row mt-2 mb-2">
                        <div class="col">
                            <h3>Ï∂îÏ≤ú ÎèÑÏÑú / ÏÉàÎ°ú Îì§Ïñ¥Ïò® Ï±Ö / ÎåÄÏ∂úÏù¥ ÎßéÏùÄ Ï±Ö</h3>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 text-center">
                            <div class="row">
                                <div class="col">
                                    <img src="/upload/3e31c603-944f-4457-9d17-d9e330a55042.jpg" width="50%" alt="">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    ÌñÑÏä§ÌÑ∞
                                </div>
                            </div>
                        </div>
                        <div class="col-4  text-center">
                            <div class="row">
                                <div class="col">
                                    <img src="/upload/3e31c603-944f-4457-9d17-d9e330a55042.jpg" width="50%" alt="">
                                </div>
                            </div>
                            <div class="row ">
                                <div class="col">
                                    ÌñÑÏä§ÌÑ∞
                                </div>
                            </div>
                        </div>
                        <div class="col-4 text-center">
                            <div class="row">
                                <div class="col">
                                    <img src="/upload/3e31c603-944f-4457-9d17-d9e330a55042.jpg" width="50%" alt="">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    ÌñÑÏä§ÌÑ∞
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <!-- ÌñâÏÇ¨ -->
                </div>
            </div>

            <!-- ÏòÅÌôîÏÉÅÏòÅ -->

        </div>
    </div>
    <!-- Ïù¥Í±∞ Îã¨Î†• Î∂àÎü¨Ïò§Îäî Ïä§ÌÅ¨Î¶ΩÌä∏ Ï£ºÏÜå ÏûÖÎãàÎã§ Îã¨Î†• ÌëúÏãúÌïòÍ≥† Ïã∂ÏúºÎ©¥ Íº≠ ÎÑ£ÏúºÏÑ∏Ïöî -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
    <script>
        //Îã¨Î†• ÏùΩÏñ¥Ïò§Í∏∞
        calendarData();

        function calendarData() {
            // ------------------- Ï≤´Î≤àÏß∏ Î∞©Ïãù ---------------//
            //Îã¨Î†• Ï†ïÎ≥¥ Î∂àÎü¨Ïò§Îäî Ïª®Ìä∏Î°§Îü¨ Ï£ºÏÜåÎäî ÏïÑÎûòÏóê ÏûàÏà®
            fetch('/bookAdmin/calendarData', { //ÏöîÏ≤≠Í≤ΩÎ°ú
                method: 'POST',
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
                },
                //Ïª®Ìä∏Î°§Îü¨Î°ú Ï†ÑÎã¨Ìï† Îç∞Ïù¥ÌÑ∞
                body: new URLSearchParams({
                    // Îç∞Ïù¥ÌÑ∞Î™Ö : Îç∞Ïù¥ÌÑ∞Í∞í
                })
            })
                .then((response) => {
                    if (!response.ok) {
                        alert('fetch error!\nÏª®Ìä∏Î°§Îü¨Î°ú ÌÜµÏã†Ï§ëÏóê Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
                        return;
                    }

                    //return response.text(); //Ïª®Ìä∏Î°§Îü¨ÏóêÏÑú returnÌïòÎäî Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÍ±∞ÎÇò int, String Ïùº Îïå ÏÇ¨Ïö©
                    return response.json(); //ÎÇòÎ®∏ÏßÄ Í≤ΩÏö∞Ïóê ÏÇ¨Ïö©
                })
                //fetch ÌÜµÏã† ÌõÑ Ïã§Ìñâ ÏòÅÏó≠
                .then((data) => {//data -> controllerÏóêÏÑú Î¶¨ÌÑ¥ÎêòÎäî Îç∞Ïù¥ÌÑ∞!
                    let eventList = []
                    eventList = data
                    console.log(eventList)


                    var calendarEl = document.getElementById('calendar');
                    var calendar = new FullCalendar.Calendar(calendarEl, {
                        //ÎÜíÏù¥ Ï°∞Ï†à
                        height: 330,
                        // Ïª®ÌÖêÏ∏† ÎÜíÏù¥ Ï°∞Ï†à
                        contentHeight: 250,

                        //ÎπÑÏú® Ï°∞Ï†à
                        aspectRatio: 1,

                        themeSystem: 'bootstrap5',
                        //Ìó§Îçî
                        headerToolbar: {
                            start: 'title',
                            center: '',
                            end: ''
                        },


                        initialView: 'dayGridMonth',
                        locale: 'ko',
                        //Ïù¥Î≤§Ìä∏
                        events: eventList

                    });
                    calendar.render();



                })
                //fetch ÌÜµÏã† Ïã§Ìå® Ïãú Ïã§Ìñâ ÏòÅÏó≠
                .catch(err => {
                    alert('fetch error!\nthen Íµ¨Î¨∏ÏóêÏÑú Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\nÏΩòÏÜîÏ∞ΩÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî!');
                    console.log(err);
                });

        }
    </script>

</th:block>

<th:block layout:fragment="content_js">
    <!-- html ÌååÏùºÏù¥ Ïó¥Î¶¥Îïå Í∞ôÏù¥ Ïã§ÌñâÎêòÎäî js -->
    <!-- <script src="/"></script> -->
</th:block>

</html>